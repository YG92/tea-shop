{% extends 'base.html' %}

{% block content %}
<div class="nav">
  <div id="cats" class="cats">
    <p class="touch-cats">Категории</p>
    <div class="list">
      {% for cat in cats %}
        <div class="li main-cat">{{ cat.name }}
        {% for subcat in cat.subcategory_set.all %}
        <div class="li sub"><a href="/product/{{ subcat.id }}">{{ subcat.name }}</a></div>
        {% endfor %}
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="articles">
    <p><a href="/article/list">Статьи</a></p>
    {% for article in articles %}
    <div class="art">
      <span>{{ article.title }}</span>
      <img src="{{article.image.url}}" alt="image">
      <div class="text">
        {{ article.text }}
        <a class="readmore" href="/article/detail/{{ article.pk }}">читать</a>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
<div class="middle">
  <div class="sort_cart">
    <form action="" class="sort">
      <select id="sort_field" name="sort_field">
        <option>Сортировать по:</option>
        <option value="price">Сначала дешевые</option>
        <option value="-price">Сначала дорогие</option>
        <option value="rating">Рейтингу</option>
      </select>
      <input class="red_button sort_submit" type="submit" value="Сортировать">
    </form>
    <div class="cart">
      <div class="cart-wrap">
        <span id="cart"><a href="/cart/">&#128722;</a></span>
        <div class="cart-content">
          <p>Товаров: {{cart.get_total_quantity}}</p>
          <p>Сумма: {{cart.get_total_price}}р</p>
        </div>
      </div>
      <a href="/order" class="red_button order">Оформить</a>
    </div>
  </div>
  <hr>
  <div class="add-product">
    <a class="red_button" href="/product/add">Редактировать</a>
  </div>
  <div class="products">
    {% for product in object_list %}
    <div class="prod">
      <a href="/product/detail/{{ product.pk }}" target="_blank">
        <div class="prodWrapper">
          <div class="image">
            <img src="{{ product.image.url }}" alt="image">
          </div>
          <div id="product-name"><h3>{{product.name}}</h3></div>
          <div id="price"><p>{{product.price}}p</p></div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</div>

{% endblock %}
